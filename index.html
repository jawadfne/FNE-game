<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>كنز المعلومات - لعبة إسلامية مميزة</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700;900&family=Cairo:wght@300;400;600;700;900&family=Noto+Naskh+Arabic:wght@400;500;600;700&display=swap');
@import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css');

:root {
    --primary-gold: #ffd700;
    --secondary-gold: #ffed4e;
    --deep-blue: #0a1929;
    --royal-blue: #1a237e;
    --emerald: #00c853;
    --ruby: #d32f2f;
    --amethyst: #7b1fa2;
    --sapphire: #1976d2;
    --glass-bg: rgba(255, 255, 255, 0.1);
    --glass-border: rgba(255, 255, 255, 0.2);
    --shadow-light: 0 8px 32px rgba(0, 0, 0, 0.1);
    --shadow-heavy: 0 20px 60px rgba(0, 0, 0, 0.3);
    --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --gradient-gold: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ffd700 100%);
    --gradient-royal: linear-gradient(135deg, #1a237e 0%, #0d47a1 50%, #1565c0 100%);
    --gradient-success: linear-gradient(135deg, #00c853 0%, #4caf50 100%);
    --gradient-error: linear-gradient(135deg, #d32f2f 0%, #f44336 100%);
    --gradient-premium: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
    --gradient-luxury: linear-gradient(135deg, #ffd700 0%, #ff6b6b 50%, #4ecdc4 100%);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Cairo', 'Noto Naskh Arabic', 'Amiri', sans-serif;
    background: linear-gradient(135deg, var(--deep-blue) 0%, #0a0f1c 50%, #1a1a2e 100%);
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
    color: #fff;
}

/* Animated Background */
body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);
    animation: backgroundShift 20s ease-in-out infinite;
    z-index: -2;
}

@keyframes backgroundShift {
    0%, 100% { transform: scale(1) rotate(0deg); }
    50% { transform: scale(1.1) rotate(1deg); }
}

/* Floating Particles */
.particles {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1;
}

.particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: var(--primary-gold);
    border-radius: 50%;
    animation: float 6s ease-in-out infinite;
    opacity: 0.6;
}

.particle:nth-child(1) { left: 10%; animation-delay: 0s; }
.particle:nth-child(2) { left: 20%; animation-delay: 1s; }
.particle:nth-child(3) { left: 30%; animation-delay: 2s; }
.particle:nth-child(4) { left: 40%; animation-delay: 3s; }
.particle:nth-child(5) { left: 50%; animation-delay: 4s; }
.particle:nth-child(6) { left: 60%; animation-delay: 5s; }
.particle:nth-child(7) { left: 70%; animation-delay: 0s; }
.particle:nth-child(8) { left: 80%; animation-delay: 1s; }
.particle:nth-child(9) { left: 90%; animation-delay: 2s; }

@keyframes float {
    0%, 100% { transform: translateY(0px) scale(1); opacity: 0.6; }
    50% { transform: translateY(-20px) scale(1.2); opacity: 1; }
}

/* Modern Header */
h1 {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    color: #fff;
    padding: 15px 20px;
    margin: 0;
    font-size: 1.6rem;
    font-weight: 700;
    text-align: center;
    text-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    position: relative;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    letter-spacing: 0.5px;
}

h1:hover {
    background: rgba(255, 255, 255, 0.1);
    text-shadow: 0 0 30px rgba(255, 215, 0, 0.6);
    border-bottom: 1px solid rgba(255, 215, 0, 0.3);
}

.logo-container {
    display: flex;
    align-items: center;
    gap: 15px;
    position: relative;
    z-index: 1;
}

.logo-container i {
    font-size: 1.4rem;
    color: var(--primary-gold);
    transition: all 0.3s ease;
    filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.3));
}

.logo-container i:hover {
    color: #fff;
    filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.6));
    transform: scale(1.1);
}





.title-text {
    font-size: 1.6rem;
    font-weight: 700;
    color: #fff;
    position: relative;
    z-index: 1;
    letter-spacing: 0.5px;
    transition: all 0.3s ease;
}

h1:hover .title-text {
    color: var(--primary-gold);
}

/* Glassmorphism Container */
.glass-container {
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 20px;
    box-shadow: var(--shadow-light);
    padding: 25px;
    margin: 15px auto;
    max-width: 600px;
    position: relative;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.glass-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: var(--gradient-gold);
    opacity: 0.7;
}

.glass-container:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-heavy);
    border-color: rgba(255, 215, 0, 0.3);
}

/* Premium Buttons */
.premium-btn {
    background: var(--gradient-primary);
    color: white;
    border: none;
    padding: 18px 35px;
    font-size: 1.2rem;
    font-weight: 600;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: var(--shadow-light);
    position: relative;
    overflow: hidden;
    font-family: 'Cairo', sans-serif;
    letter-spacing: 1px;
    text-transform: uppercase;
    margin: 15px 10px;
    min-width: 200px;
}

.premium-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.6s ease;
}

.premium-btn:hover::before {
    left: 100%;
}

.premium-btn:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 15px 40px rgba(0,0,0,0.3), 0 0 30px rgba(102, 126, 234, 0.4);
    background: var(--gradient-gold);
    color: var(--deep-blue);
}

.premium-btn:active {
    transform: translateY(-1px) scale(1.02);
}

/* Input Styling */
.premium-input {
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid var(--glass-border);
    border-radius: 15px;
    padding: 20px 25px;
    font-size: 1.3rem;
    color: white;
    width: 100%;
    margin: 20px 0;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
    font-family: 'Cairo', sans-serif;
    text-align: center;
}

.premium-input::placeholder {
    color: rgba(255, 255, 255, 0.7);
}

.premium-input:focus {
    outline: none;
    border-color: var(--primary-gold);
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
    background: rgba(255, 255, 255, 0.15);
}

/* Quiz Container */
#quiz-container {
    background: var(--glass-bg);
    backdrop-filter: blur(25px);
    -webkit-backdrop-filter: blur(25px);
    border: 1px solid var(--glass-border);
    border-radius: 20px;
    box-shadow: var(--shadow-heavy);
    padding: 20px;
    margin: 10px auto;
    max-width: 900px;
    position: relative;
    overflow: hidden;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    height: calc(100vh - 120px);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.quiz-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    flex-wrap: wrap;
    gap: 10px;
}

.quiz-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    min-height: 0;
}

.quiz-footer {
    margin-top: 15px;
}

#answers {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin: 15px 0;
}

#quiz-container::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent 30%, rgba(255, 215, 0, 0.1) 50%, transparent 70%);
    animation: shine 6s infinite;
    pointer-events: none;
}

#quiz-container::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 50%, rgba(240, 147, 251, 0.05) 100%);
    pointer-events: none;
    border-radius: 30px;
}

@keyframes shine {
    0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
    100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
}

/* Question Styling */
#question {
    font-size: 1.4rem;
    font-weight: 700;
    color: #fff;
    margin-bottom: 15px;
    text-align: center;
    line-height: 1.3;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3), 0 0 15px rgba(255, 255, 255, 0.2);
    position: relative;
    padding: 15px;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(102, 126, 234, 0.1) 100%);
    border-radius: 15px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    animation: questionAppear 0.8s ease-out;
    backdrop-filter: blur(15px);
    overflow: hidden;
}

@keyframes questionAppear {
    0% { 
        opacity: 0; 
        transform: translateY(30px) scale(0.9);
    }
    100% { 
        opacity: 1; 
        transform: translateY(0) scale(1);
    }
}

/* Answer Buttons */
.answer-btn {
    background: var(--gradient-premium);
    color: white;
    border: none;
    padding: 14px 20px;
    margin: 5px 0;
    font-size: 1.1rem;
    font-weight: 600;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: var(--shadow-light);
    position: relative;
    overflow: hidden;
    font-family: 'Cairo', sans-serif;
    width: 100%;
    text-align: center;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    animation: buttonSlideIn 0.6s ease-out;
    transform: translateY(0);
}

.answer-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.6s ease;
}

.answer-btn:hover::before {
    left: 100%;
}

.answer-btn:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 15px 40px rgba(0,0,0,0.3), 0 0 30px rgba(102, 126, 234, 0.4);
    background: var(--gradient-luxury);
    color: var(--deep-blue);
    border: 2px solid var(--primary-gold);
}

.answer-btn:active {
    transform: translateY(-2px) scale(1.01);
}

.answer-btn.correct {
    background: var(--gradient-success);
    animation: correctPulse 0.6s ease-out;
    box-shadow: 0 0 30px rgba(0, 200, 83, 0.5);
}

.answer-btn.wrong {
    background: var(--gradient-error);
    animation: wrongShake 0.6s ease-out;
    box-shadow: 0 0 30px rgba(211, 47, 47, 0.5);
}

@keyframes correctPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

@keyframes wrongShake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-10px); }
    75% { transform: translateX(10px); }
}

@keyframes buttonSlideIn {
    0% { 
        opacity: 0; 
        transform: translateX(-50px);
    }
    100% { 
        opacity: 1; 
        transform: translateX(0);
    }
}

/* Helper Tools */
.helper-tools {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin: 10px 0;
    flex-wrap: wrap;
}

.helper-btn {
    background: var(--gradient-royal);
    color: white;
    border: none;
    padding: 8px 15px;
    font-size: 0.8rem;
    font-weight: 600;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: var(--shadow-light);
    position: relative;
    overflow: hidden;
    font-family: 'Cairo', sans-serif;
    min-width: 110px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.helper-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s ease;
}

.helper-btn:hover::before {
    left: 100%;
}

.helper-btn:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 10px 30px rgba(0,0,0,0.3), 0 0 20px rgba(26, 35, 126, 0.4);
    background: var(--gradient-luxury);
    color: var(--deep-blue);
    border: 2px solid var(--primary-gold);
}

.helper-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

.helper-btn:disabled:hover {
    transform: none;
    box-shadow: var(--shadow-light);
}

/* Score and Timer */
#score {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--primary-gold);
    text-align: center;
    margin: 0;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 215, 0, 0.1) 100%);
    padding: 8px 15px;
    border-radius: 10px;
    border: 1px solid rgba(255, 215, 0, 0.3);
    backdrop-filter: blur(10px);
    position: relative;
    overflow: hidden;
}

#timer {
    font-size: 1.6rem;
    font-weight: 900;
    color: var(--primary-gold);
    text-align: center;
    margin: 0;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.4);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 215, 0, 0.15) 100%);
    padding: 10px 20px;
    border-radius: 12px;
    border: 2px solid var(--primary-gold);
    backdrop-filter: blur(10px);
    animation: timerPulse 1s ease-in-out infinite;
    position: relative;
    overflow: hidden;
}

@keyframes timerPulse {
    0%, 100% { 
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
    }
    50% { 
        box-shadow: 0 0 40px rgba(255, 215, 0, 0.6);
    }
}

/* Hint Styling */
#hint {
    background: var(--gradient-luxury);
    color: white;
    padding: 10px 15px;
    border-radius: 10px;
    margin: 10px 0;
    text-align: center;
    font-size: 1rem;
    font-weight: 600;
    box-shadow: var(--shadow-light);
    border: 2px solid var(--primary-gold);
    backdrop-filter: blur(10px);
    animation: hintSlideIn 0.5s ease-out;
    position: relative;
    overflow: hidden;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

@keyframes hintSlideIn {
    0% { 
        opacity: 0; 
        transform: translateY(-20px);
    }
    100% { 
        opacity: 1; 
        transform: translateY(0);
    }
}

/* Modern Notification */
.popup {
    position: fixed;
    top: 80px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 215, 0, 0.3);
    border-radius: 12px;
    padding: 12px 20px;
    text-align: center;
    font-size: 1rem;
    font-weight: 500;
    color: white;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    z-index: 1000;
    animation: notificationSlideDown 0.3s ease-out;
    max-width: 400px;
    min-width: 200px;
}

@keyframes notificationSlideDown {
    0% { 
        opacity: 0; 
        transform: translateX(-50%) translateY(-20px);
    }
    100% { 
        opacity: 1; 
        transform: translateX(-50%) translateY(0);
    }
}

@keyframes notificationSlideUp {
    0% { 
        opacity: 1; 
        transform: translateX(-50%) translateY(0);
    }
    100% { 
        opacity: 0; 
        transform: translateX(-50%) translateY(-20px);
    }
}

/* End Screen */
#end-screen {
    background: var(--glass-bg);
    backdrop-filter: blur(25px);
    -webkit-backdrop-filter: blur(25px);
    border: 2px solid var(--primary-gold);
    border-radius: 30px;
    padding: 60px 40px;
    text-align: center;
    box-shadow: var(--shadow-heavy);
    margin: 30px auto;
    max-width: 600px;
    position: relative;
    overflow: hidden;
}

#end-screen::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent 30%, rgba(255, 215, 0, 0.1) 50%, transparent 70%);
    animation: shine 4s infinite;
    pointer-events: none;
}

#end-screen h2 {
    font-size: 2.5rem;
    font-weight: 900;
    color: var(--primary-gold);
    margin-bottom: 30px;
    text-shadow: 3px 3px 6px rgba(0,0,0,0.4);
    animation: titleGlow 2s ease-in-out infinite;
}

@keyframes titleGlow {
    0%, 100% { 
        text-shadow: 3px 3px 6px rgba(0,0,0,0.4), 0 0 20px rgba(255, 215, 0, 0.3);
    }
    50% { 
        text-shadow: 3px 3px 6px rgba(0,0,0,0.4), 0 0 40px rgba(255, 215, 0, 0.6);
    }
}

#end-screen p {
    font-size: 1.3rem;
    margin: 25px 0;
    color: #fff;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

/* Responsive Design */
@media (max-width: 768px) {
    h1 {
        font-size: 1.4rem;
        padding: 12px 15px;
        gap: 10px;
    }
    
    .logo-container i {
        font-size: 1.2rem;
    }
    
    .title-text {
        font-size: 1.4rem;
    }
    
    .glass-container {
        margin: 10px 15px;
        padding: 20px 15px;
    }
    
    #quiz-container {
        margin: 5px 10px;
        padding: 15px;
        height: calc(100vh - 100px);
    }
    
    .quiz-header {
        flex-direction: column;
        text-align: center;
        gap: 8px;
        margin-bottom: 10px;
    }
    
    #question {
        font-size: 1.2rem;
        padding: 12px;
    }
    
    .answer-btn {
        padding: 12px 15px;
        font-size: 1rem;
    }
    
    #answers {
        grid-template-columns: 1fr;
        gap: 8px;
    }
    
    .helper-tools {
        flex-direction: row;
        justify-content: center;
        gap: 8px;
    }
    
    .helper-btn {
        min-width: 90px;
        padding: 6px 12px;
        font-size: 0.7rem;
    }
    
    .premium-btn {
        padding: 12px 20px;
        font-size: 0.9rem;
        min-width: 120px;
    }
    
    #timer {
        font-size: 1.4rem;
        padding: 8px 15px;
    }
    
    #score {
        font-size: 1rem;
        padding: 6px 12px;
    }
    
    .popup {
        top: 75px;
        max-width: 350px;
        min-width: 200px;
    }
}

@media (max-width: 480px) {
    h1 {
        font-size: 1.2rem;
        padding: 10px 12px;
        gap: 8px;
    }
    
    .logo-container i {
        font-size: 1rem;
    }
    
    .title-text {
        font-size: 1.2rem;
    }
    
    #quiz-container {
        margin: 3px 8px;
        padding: 12px;
        height: calc(100vh - 90px);
    }
    
    #question {
        font-size: 1.1rem;
        padding: 10px;
    }
    
    .answer-btn {
        padding: 10px 15px;
        font-size: 0.9rem;
    }
    
    .helper-btn {
        min-width: 80px;
        padding: 5px 10px;
        font-size: 0.65rem;
    }
    
    .premium-btn {
        padding: 10px 15px;
        font-size: 0.8rem;
        min-width: 100px;
    }
    
    #timer {
        font-size: 1.2rem;
        padding: 6px 12px;
    }
    
    #score {
        font-size: 0.9rem;
        padding: 5px 10px;
    }
    
    .popup {
        top: 70px;
        max-width: 320px;
        min-width: 180px;
        font-size: 0.9rem;
        padding: 10px 15px;
    }
}

/* Loading Animation */
.loading {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    border-top-color: var(--primary-gold);
    animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Success Animation */
.success-animation {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 5rem;
    color: var(--primary-gold);
    z-index: 1001;
    animation: successBounce 1s ease-out;
    pointer-events: none;
}

@keyframes successBounce {
    0% { 
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
    }
    50% { 
        transform: translate(-50%, -50%) scale(1.2);
        opacity: 1;
    }
    100% { 
        transform: translate(-50%, -50%) scale(1);
        opacity: 0;
    }
}

/* Hidden elements */
.hidden {
    display: none !important;
}

/* Custom scrollbar */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb {
    background: var(--primary-gold);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--secondary-gold);
}
</style>
</head>
<body>
<!-- Floating Particles -->
<div class="particles">
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
</div>

<h1 onclick="location.reload()">
    <div class="logo-container">
        <i class="fas fa-star"></i>
        <span class="title-text">كنز المعلومات</span>
        <i class="fas fa-star"></i>
    </div>
</h1>

<div id="start-screen" class="glass-container">
    <h2 style="font-size: 2.5rem; margin-bottom: 30px; color: var(--primary-gold); text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
        <i class="fas fa-play-circle"></i> مرحباً بك في اللعبة
    </h2>
    <p style="font-size: 1.3rem; margin-bottom: 30px; line-height: 1.6;">
        اختبر معلوماتك الإسلامية في هذه اللعبة المميزة!<br>
        <span style="color: var(--primary-gold); font-weight: 600;">أجب على الأسئلة واربح النقاط</span>
    </p>
    <input type="text" id="player-name" class="premium-input" placeholder="أدخل اسمك هنا..." maxlength="20">
    <br>
    <button onclick="startGame()" class="premium-btn">
        <i class="fas fa-rocket"></i> ابدأ اللعبة
    </button>
</div>

<div id="quiz-container" class="hidden">
    <div class="quiz-header">
        <div id="score">
            النقاط: 0 | الأخطاء: 0
        </div>
        <div id="timer">
            30
        </div>
    </div>
    
    <div class="quiz-content">
        <div id="question">
            السؤال سيظهر هنا
        </div>
        
        <div id="answers">
            <!-- الإجابات ستظهر هنا -->
        </div>
        
        <div id="hint" style="display: none;">
            التلميح سيظهر هنا
        </div>
    </div>
    
    <div class="quiz-footer">
        <div class="helper-tools">
            <button id="remove-two-btn" onclick="removeTwoWrongAnswers()" class="helper-btn">
                <i class="fas fa-minus-circle"></i> إزالة خيارين
            </button>
            <button id="hint-btn" onclick="showHint()" class="helper-btn">
                <i class="fas fa-lightbulb"></i> تلميح
            </button>
            <button id="pause-timer-btn" onclick="pauseTimer()" class="helper-btn">
                <i class="fas fa-pause"></i> إيقاف المؤقت
            </button>
        </div>
    </div>
</div>

<div id="end-screen" class="hidden">
    <!-- شاشة النهاية ستظهر هنا -->
</div>

<script>
// Premium Game Variables
let playerName = "";
let score = 0;
let mistakes = 0;
let currentQuestion = 0;
let timeLeft = 30;
let timer;
let audioContext;
let helperToolsUsed = {
    removeTwo: false,
    hint: false,
    pauseTimer: false
};

// Premium Questions Database
const questions = [
    {
        q: "من هو أول خليفة في الإسلام؟",
        answers: ["أبو بكر الصديق", "عمر بن الخطاب", "عثمان بن عفان", "علي بن أبي طالب"],
        correct: 0
    },
    {
        q: "كم عدد أركان الإسلام؟",
        answers: ["4", "5", "6", "7"],
        correct: 1
    },
    {
        q: "ما هو أول مسجد بني في الإسلام؟",
        answers: ["مسجد قباء", "المسجد النبوي", "المسجد الحرام", "مسجد الأقصى"],
        correct: 0
    },
    {
        q: "من هو آخر الأنبياء والرسل؟",
        answers: ["عيسى عليه السلام", "موسى عليه السلام", "محمد صلى الله عليه وسلم", "إبراهيم عليه السلام"],
        correct: 2
    },
    {
        q: "كم عدد سور القرآن الكريم؟",
        answers: ["112", "113", "114", "115"],
        correct: 2
    },
    {
        q: "ما هي أول سورة نزلت في القرآن؟",
        answers: ["الفاتحة", "البقرة", "العلق", "العلق"],
        correct: 2
    },
    {
        q: "من هو أول مؤذن في الإسلام؟",
        answers: ["بلال بن رباح", "عبد الله بن مسعود", "أبو ذر الغفاري", "سلمان الفارسي"],
        correct: 0
    },
    {
        q: "كم عدد ركعات صلاة الظهر؟",
        answers: ["2", "3", "4", "5"],
        correct: 2
    },
    {
        q: "ما هو شهر رمضان في التقويم الهجري؟",
        answers: ["الشهر السابع", "الشهر الثامن", "الشهر التاسع", "الشهر العاشر"],
        correct: 2
    },
    {
        q: "من هو أول من أسلم من الرجال؟",
        answers: ["أبو بكر الصديق", "عمر بن الخطاب", "علي بن أبي طالب", "عثمان بن عفان"],
        correct: 0
    },
    {
        q: "ما هي أعظم سورة في القرآن؟",
        answers: ["الفاتحة", "البقرة", "آل عمران", "النساء"],
        correct: 1
    },
    {
        q: "كم عدد أحزاب القرآن؟",
        answers: ["30", "60", "120", "240"],
        correct: 1
    },
    {
        q: "من هو أول من جمع القرآن في مصحف واحد؟",
        answers: ["أبو بكر الصديق", "عمر بن الخطاب", "عثمان بن عفان", "علي بن أبي طالب"],
        correct: 0
    },
    {
        q: "ما هي أطول سورة في القرآن؟",
        answers: ["البقرة", "آل عمران", "النساء", "المائدة"],
        correct: 0
    },
    {
        q: "كم عدد كلمات القرآن الكريم؟",
        answers: ["77439", "77440", "77441", "77442"],
        correct: 0
    },
    {q:"ما هي أول سورة في القرآن الكريم؟",answers:["البقرة","الفاتحة","الإخلاص","الكوثر"],correct:1},
    {q:"كم عدد أركان الإسلام؟",answers:["3","4","5","6"],correct:2},
    {q:"من هو خاتم الأنبياء؟",answers:["موسى","عيسى","محمد","نوح"],correct:2},
    {q:"في أي عام هجري وقعت غزوة بدر؟",answers:["1 هجري","2 هجري","3 هجري","4 هجري"],correct:1},
    {q:"كم عدد أجزاء القرآن الكريم؟",answers:["30","20","40","10"],correct:0},
    {q:"من أول الخلفاء الراشدين؟",answers:["عمر بن الخطاب","عثمان بن عفان","أبو بكر الصديق","علي بن أبي طالب"],correct:2},
    {q:"ما اسم الغار الذي كان فيه النبي ﷺ وأبو بكر يوم الهجرة؟",answers:["غار حراء","غار ثور","غار أحد","غار المروة"],correct:1},
    {q:"كم عدد أبواب الجنة؟",answers:["8","7","9","10"],correct:0},
    {q:"من أول مؤذن في الإسلام؟",answers:["بلال بن رباح","أبو هريرة","عبدالله بن مسعود","خالد بن الوليد"],correct:0},
    {q:"ما هو الركن الثاني من أركان الإسلام؟",answers:["الصلاة","الزكاة","الصوم","الشهادة"],correct:0},
    {q:"كم عدد السجدات في القرآن الكريم؟",answers:["15","14","13","16"],correct:0},
    {q:"ما اسم أم النبي محمد ﷺ؟",answers:["آمنة بنت وهب","خديجة بنت خويلد","حفصة بنت عمر","عائشة بنت أبي بكر"],correct:0},
    {q:"ما هي أول كلمة نزلت من القرآن؟",answers:["اقرأ","الحمد","بسم","الله"],correct:0},
    {q:"كم عدد الركعات في صلاة الظهر؟",answers:["4","2","3","5"],correct:0},
    {q:"من هو الصحابي الملقب بسيف الله المسلول؟",answers:["خالد بن الوليد","عمر بن الخطاب","علي بن أبي طالب","حمزة بن عبد المطلب"],correct:0},
    {q:"ما هي ثاني أكبر سورة في القرآن؟",answers:["الأعراف","النساء","آل عمران","المائدة"],correct:0},
    {q:"أي نبي ابتلعه الحوت؟",answers:["يونس","نوح","إبراهيم","موسى"],correct:0},
    {q:"ما اسم الغزوة التي وقعت في رمضان؟",answers:["بدر","أحد","الخندق","تبوك"],correct:0},
    {q:"ما الركن الرابع من أركان الإسلام؟",answers:["الصوم","الحج","الزكاة","الشهادة"],correct:0},
    {q:"من أول سفير في الإسلام؟",answers:["مصعب بن عمير","بلال بن رباح","أبو هريرة","سعد بن أبي وقاص"],correct:0},
    {q:"كم عدد أسماء الله الحسنى؟",answers:["99","100","98","97"],correct:0},
    {q:"ما اسم والد النبي ﷺ؟",answers:["عبدالله","عبدالمطلب","أبو طالب","حمزة"],correct:0},
    {q:"ما اسم الغار قبل البعثة؟",answers:["حراء","ثور","أحد","المروة"],correct:0},
    {q:"ما هي أطول آية في القرآن؟",answers:["آية الدين","آية الكرسي","التطهير","النور"],correct:0},
    {q:"كم عدد أشهر الحرم؟",answers:["4","3","2","5"],correct:0},
    {q:"ما القبلة الأولى للمسلمين؟",answers:["الأقصى","الكعبة","قباء","النبي"],correct:0},
    {q:"أي نبي تحدث كطفل؟",answers:["عيسى","محمد","موسى","إبراهيم"],correct:0},
    {q:"كم تكبيرات صلاة الجنازة؟",answers:["4","5","6","3"],correct:0},
    {q:"ما السورة التي لا تبدأ بالبسملة؟",answers:["التوبة","الأنفال","النساء","الإسراء"],correct:0},
    {q:"كم كان عمر النبي ﷺ عند الوفاة؟",answers:["63","60","65","62"],correct:0},
    {q:"من هو الفاروق؟",answers:["عمر بن الخطاب","علي","أبو بكر","عثمان"],correct:0},
    {q:"ما آخر سورة في القرآن؟",answers:["الناس","الفلق","الإخلاص","الكافرون"],correct:0},
    {q:"من أول من أسلم من الصبيان؟",answers:["علي","عبدالله بن مسعود","زيد","بلال"],correct:0},
    {q:"ما دعاء يونس من بطن الحوت؟",answers:["لا إله إلا أنت سبحانك إني كنت من الظالمين","رب زدني علماً","رب اشرح لي صدري","حسبنا الله ونعم الوكيل"],correct:0},
    {q:"كم حج النبي ﷺ؟",answers:["مرة واحدة","مرتان","ثلاث","لم يحج"],correct:0},
    {q:"أي سورة تعادل ثلث القرآن؟",answers:["الإخلاص","الفاتحة","الكوثر","النصر"],correct:0},
    {q:"من أول نبي بُعث؟",answers:["نوح","إبراهيم","آدم","موسى"],correct:0},
    {q:"كم مرة ورد اسم عيسى بالقرآن؟",answers:["25","30","20","15"],correct:0},
    {q:"ما اسم المسجد الذي أُسري إليه؟",answers:["الأقصى","الحرام","النبوي","قباء"],correct:0},
    {q:"كم كان عمر النبي ﷺ عند البعثة؟",answers:["40","35","45","50"],correct:0},
    {q:"ما أول صلاة فُرضت؟",answers:["الظهر","الفجر","المغرب","العصر"],correct:0},
    {q:"من لقب بذي النورين؟",answers:["عثمان","علي","أبو بكر","عمر"],correct:0},
    {q:"أقصر سورة؟",answers:["الكوثر","الإخلاص","النصر","الفلق"],correct:0},
    {q:"آخر خليفة راشد؟",answers:["علي","عمر","أبو بكر","عثمان"],correct:0},
    {q:"أي نبي رأى ذبح ابنه؟",answers:["إبراهيم","نوح","يعقوب","موسى"],correct:0},
    {q:"كم ركعة الواحد من الركوع؟",answers:["1","2","3","4"],correct:0},
    {q:"ما السورة التي تبدأ يا أيها المزمل؟",answers:["المزمل","المدثر","الفاتحة","الضحى"],correct:0},
    {q:"من جهر بالقرآن في مكة؟",answers:["عبدالله بن مسعود","بلال","عمار","أبو ذر"],correct:0},
    {q:"من أبو النبي ﷺ؟",answers:["عبدالله","عبدالمطلب","أبو طالب","حمزة"],correct:0},
    {q:"ما شهر الصيام؟",answers:["رمضان","شعبان","رجب","محرم"],correct:0},
    {q:"من أول رسول؟",answers:["نوح","آدم","إبراهيم","موسى"],correct:0},
    {q:"كم ركعات العصر؟",answers:["4","3","2","5"],correct:0},
    {q:"أي سورة ذُكرت فيها البسملة مرتين؟",answers:["النمل","الرحمن","الأنفال","التوبة"],correct:0},
    {q:"كم عدد حروف البسملة؟",answers:["19","20","18","21"],correct:0},
    {q:"ما اسم ملك الوحي؟",answers:["جبريل","ميكائيل","إسرافيل","عزرائيل"],correct:0},
    {q:"من خازن النار؟",answers:["مالك","رضوان","جبريل","عزرائيل"],correct:0},
    {q:"كم ركعات التراويح؟",answers:["20","8","12","15"],correct:0},
    {q:"أي نبي أتقن لغة الطير؟",answers:["سليمان","يوسف","إبراهيم","محمد"],correct:0},
    {q:"من اهتز عرش الرحمن لموته؟",answers:["سعد بن معاذ","سعد بن أبي وقاص","حمزة","مصعب"],correct:0},
    {q:"كم عدد ركعات الفجر؟",answers:["2","1","3","4"],correct:0},
    {q:"ما أول سورة نزلت مكية؟",answers:["العلق","الماعون","المدثر","الرحمن"],correct:0},
    {q:"ما اسم والدته؟",answers:["آمنة","خديجة","حفصة","عائشة"],correct:0},
    {q:"كم عدد أحاديث البخاري تقريبا؟",answers:["7000","4000","5000","6000"],correct:0},
    {q:"ما اسم صحابي جُندب؟",answers:["جُندب بن جراح","جُندب بن عبد الله","جُندب بن الحارث","جُندب بن مالك"],correct:0},
    {q:"ما اسم عاصفة الأحقاف؟",answers:["ريح الأحقاف","ريح نينوى","ريح حزرة","ريح عاصف"],correct:0},
    {q:"أول من كتب القرآن؟",answers:["علي","عثمان","أبو بكر","عمر"],correct:0},
    {q:"كم عدد آيات البقرة؟",answers:["286","200","300","250"],correct:0},
    {q:"ما اسم الصحابي الذي رُفع لبدنه؟",answers:["عمار بن ياسر","بلال","عائشة","أبو هريرة"],correct:0},
    {q:"من أول مدني؟",answers:["سورة البقرة","الفاتحة","الإخلاص","النصر"],correct:0},
    {q:"كم عدد آيات الكهف؟",answers:["110","90","100","120"],correct:0},
    {q:"ما اسم الجبل نفسه؟",answers:["الحراء","طور سيناء","أحد","ثعلبة"],correct:0},
    {q:"كم كانت مدة البعثة؟",answers:["23 سنة","25 سنة","20 سنة","30 سنة"],correct:0},
    {q:"من الصحابي الراوي؟",answers:["أنس بن مالك","سلمان الفارسي","عبد الله بن عباس","أبو هريرة"],correct:0},
    {q:"ما أول غزوة؟",answers:["بدر","أحد","الخندق","تبوك"],correct:0},
    {q:"كم عدد آيات الكوثر؟",answers:["3","4","5","2"],correct:0},
    {q:"من الصحابي حافظ القرآن الأول؟",answers:["بلال","عبد الله بن مسعود","عمّار","عثمان"],correct:0},
    {q:"ما اسم ناقة ثمود؟",answers:["الصابئة","البقرة","العقبة","الناقة"],correct:0},
    {q:"كم سنة مكثت مهاجرًا؟",answers:["13 سنة","10 سنوات","15 سنة","20 سنة"],correct:0},
    {q:"من هو الأمين؟",answers:["محمد ﷺ","علي","عمر","عثمان"],correct:0},
    {q:"أي الصحابيات أول هجرة؟",answers:["أسماء بنت أبي بكر","عائشة","حفصة","زينب"],correct:0},
    {q:"من هو جبل النور؟",answers:["الحراء","أحد","ثور","العريش"],correct:0},
    {q:"ما اسم صحابي وهب نفسه؟",answers:["عمار بن ياسر","بلال","علي","حمزة"],correct:0},
    {q:"من أول من كشف القرآن؟",answers:["علي","عثمان","خالد","بلال"],correct:0},
    {q:"كم عدد ركعات المغرب؟",answers:["3","2","4","1"],correct:0},
    {q:"ما اسم السورة التي ذكر فيها يوسف؟",answers:["يوسف","طه","الأعراف","يس"],correct:0},
    {q:"من أول من فتح مكة؟",answers:["محمد ﷺ","أبو بكر","عمر","عثمان"],correct:0},
    {q:"كم عدد آيات الإخلاص؟",answers:["4","5","3","6"],correct:0},
    {q:"ما اسم البحر الذي عبره موسى؟",answers:["النايل الأحمر","البحر الميت","البحر الأحمر","البحر الأبيض"],correct:0},
    {q:"من هو الصحابي صاحب القرآن المقروء؟",answers:["حفصة","عثمان","علي","أم سلمة"],correct:0},
    {q:"كم عدد آيات النور؟",answers:["64","50","70","80"],correct:0},
    {q:"ما اسم السورة التي تبدأ بكلمة ألم؟",answers:["ص","ق","العنكبوت","مرسلات"],correct:0},
    {q:"من أول من طاف بالبيت؟",answers:["إبراهيم","أبو بكر","محمد","عمر"],correct:0},
    {q:"كم عدد ركعات الفجر؟",answers:["2","1","3","4"],correct:0},
    {q:"ما اسم أخ النبي؟",answers:["قاسم","علي","إدريس","هارون"],correct:0},
    {q:"من أول مدّني خلقهم؟",answers:["سورة البقرة","الفاتحة","آل عمران","النساء"],correct:0},
    {q:"كم عدد سور القرآن؟",answers:["114","113","115","112"],correct:0},
    {q:"ما أول آية نزلت في السلم؟",answers:["آية الطلاق","آية البقرة","آية النساء","آية المائدة"],correct:0},
    {q:"من أول من قُتل شهيدًا؟",answers:["سعد بن أبي وقاص","حسن بن علي","مصعب بن عمير","حمزة"],correct:0},
    {q:"ما هو اسم والد النبي إبراهيم عليه السلام؟",answers:["آزر","تغلب","لوك","شعيب"],correct:0},
    {q:"في أي شهر فرضت فريضة الحج؟",answers:["شوال","ذو الحجة","ذو القعدة","شعبان"],correct:2},
    {q:"كم عدد الركعات في السنن الرواتب بعد صلاة العصر؟",answers:["2","4","0","6"],correct:0},
    {q:"ما اسم النبي الذي شدّ البحر بمعجزة؟",answers:["موسى عليه السلام","إبراهيم عليه السلام","عيسى عليه السلام","يونس عليه السلام"],correct:0},
    {q:"من هو الصحابي الذي جمع القرآن بعد وفاة النبي ﷺ؟",answers:["أبو بكر الصديق","عمر بن الخطاب","عثمان بن عفان","علي بن أبي طالب"],correct:2},
    {q:"ما هو اسم الأمين الذي لقب به النبي ﷺ؟",answers:["محمد","أمين","صادق","هاشمي"],correct:0},
    {q:"كم عدد سور القرآن التي تبدأ بحروف مقطعة؟",answers:["29","14","5","7"],correct:0},
    {q:"من هو النبي الذي تسمّى بالخليل؟",answers:["إبراهيم عليه السلام","موسى عليه السلام","داود عليه السلام","محمد ﷺ"],correct:0},
    {q:"ما اسم جبل عرفات؟",answers:["الرحمة","أحد","نور","الحراء"],correct:0},
    {q:"أي سورة نزلت بعد فاتحة الكتاب؟",answers:["البقرة","الأنعام","النساء","الشرح"],correct:0},
    {q:"كم سنة مكث النبي ﷺ في مكة؟",answers:["13","10","23","40"],correct:0},
    {q:"من هو أول من دعا بشلّة من الخلفاء الراشدين؟",answers:["أبو بكر","عمر","عثمان","علي"],correct:1},
    {q:"ما اسم عبد الرحمن الصحابي؟",answers:["عبد الرحمن بن عوف","عبد الرحمن بن عاص","عبد الرحمن بن أبي بكر","عبد الرحمن بن هشام"],correct:0},
    {q:"في أي غزوة استشهد حمزة عم النبي ﷺ؟",answers:["أحد","بدر","الخندق","تبوك"],correct:0},
    {q:"كم عدد آيات سورة الكهف؟",answers:["110","100","80","120"],correct:0},
    {q:"من الذي وضع أول مصحف في عهد النبي ﷺ؟",answers:["علي بن أبي طالب","عثمان بن عفان","أبو بكر","زيد بن ثابت"],correct:3},
    {q:"ما اسم السورة التي تتحدث عن سبع سماوات وسبع أراض؟",answers:["مريم","طه","الملك","البقرة"],correct:0},
    {q:"كم مرة وردت كلمة الجهاد في القرآن؟",answers:["41","51","31","21"],correct:0},
    {q:"من هو الصحابي الذي لقب بـ (قرّاء الظمآن)؟",answers:["بلال بن رباح","حسان بن ثابت","سلمان الفارسي","عبدالله بن رواحة"],correct:0},
    {q:"كم عدد المرابطين في صلح الحديبية؟",answers:["ألف","2000","3000","500"],correct:0},
    {q:"أين كانت غزوة الخندق؟",answers:["الأحزاب","بدر","أحد","تبوك"],correct:0},
    {q:"كم عدد الركعات في صلاة الكسوف؟",answers:["2 ركعتين","4 ركعات","6 ركعات","صلاة خشوع"],correct:0},
    {q:"من هو النبي صاحب الزبور؟",answers:["داود عليه السلام","موسى عليه السلام","عيسى عليه السلام","إبراهيم عليه السلام"],correct:0},
    {q:"ما اسم أخ النبي يوسف عليه السلام؟",answers:["أولاً: شقيق","بختنصر","هود","إسرائيل"],correct:3},
    {q:"كم عامًا مكث النبي ﷺ في المدينة؟",answers:["10 سنوات","23 عاما","13 عاما","5 سنوات"],correct:0},
    {q:"من الذي استشار النبي ﷺ بشأن الهجرة؟",answers:["أبو بكر","علي","عمر","عثمان"],correct:0},
    {q:"ما اسم العبادة التي تقام في المسجد الحرام بعد الحج؟",answers:["الطواف","السعي","العمرة","البدن"],correct:2},
    {q:"كم عدد الوقوف في الحج؟",answers:["3","2","1","4"],correct:0},
    {q:"في أي غزوة فتح مكة؟",answers:["8 هجري","2 هجري","3 هجري","6 هجري"],correct:0},
    {q:"من هو مؤسس الحلقات العلمية في المسجد النبوي؟",answers:["عمر بن الخطاب","عثمان بن عفان","علي بن أبي طالب","عمران بن حصين"],correct:3},
    {q:"ما اسم أول مسجد بني بعد الهجرة؟",answers:["قباء","الأقصى","الحراء","الخيف"],correct:0},
    {q:"كم عدد آيات آلام الكتاب في سورة الكهف؟",answers:["1","2","3","4"],correct:1},
    {q:"من هو الصحابي الذي كلمه العبدة؟",answers:["عمر بن الخطاب","زيد بن حارثة","أبو هريرة","مصعب بن عمير"],correct:1},
    {q:"كم عدد سور المدنيات؟",answers:["28","24","29","30"],correct:0},
    {q:"من هو النبي الذي كان يقود بني إسرائيل؟",answers:["موسى عليه السلام","هارون عليه السلام","عيسى عليه السلام","إبراهيم عليه السلام"],correct:0},
    {q:"كم عدد أسماء النبي محمد ﷺ المذكورة في القرآن؟",answers:["4","5","6","3"],correct:0},
    {q:"ما هو لفظ الجلالة الذي يبدأ بأول سورة؟",answers:["بسم","الحمد","الله","رحمن"],correct:0},
    {q:"من هو الإمام الذي جمع القرآن وأعطاه للسيدة حفصة؟",answers:["عثمان بن عفان","أبو بكر","عمر","زيد بن ثابت"],correct:0},
    {q:"كم عدد ركعات صلاة الضحى؟",answers:["2","4","8","12"],correct:1},
    {q:"ما اسم النبي الذي عجز الجمل له؟",answers:["صالح عليه السلام","هود عليه السلام","سليمان عليه السلام","يعقوب عليه السلام"],correct:0},
    {q:"في أي غزوة قتل زيد بن حارثة؟",answers:["أحد","خندق","بدر","تبوك"],correct:1},
    {q:"كم عدد المرات التي وردت فيها كلمة (آمنوا) في القرآن؟",answers:["xx","yy","zz","qq"],correct:0},
    {q:"ما اسم السورة التي أنزلت بعد التوبة؟",answers:["يونس","هود","فاطر","فاطر"],correct:0},
    {q:"كم عدد ركعات صلاة قيام الليل عند النبي ﷺ؟",answers:["11-13","8","5","20"],correct:0},
    {q:"في أي عام بُني المسجد النبوي؟",answers:["1 هجري","2 هجري","3 هجري","4 هجري"],correct:0},
    {q:"ما اسم أول هجرة للمسلمين؟",answers:["الرضوان","بعث","إلى الحبشة","المدينة"],correct:2},
    {q:"من هو الصحابي الذي كان مؤذناً في الجنة؟",answers:["بلال بن رباح","بلال بن يزيد","بلال بن عمرو","بلال بن سعد"],correct:0},
    {q:"ما اسم السورة التي تسمّى العمود؟",answers:["يوسف","الرحمن","الرعد","الكهف"],correct:0},
    {q:"من هو الصحابي الذي كتب الوحي للنبي ﷺ؟",answers:["زيد بن ثابت","معاذ بن جبل","عبدالله بن مسعود","علي بن أبي طالب"],correct:0},
    {q:"كم عمر النبي عندما فتح مكة؟",answers:["630 عام","40 عام","52عامًا","70عامًا"],correct:0},
    {q:"ما اسم عورة المرأة؟",answers:["من السرة إلى الركبة","ركبة","حلمة","الكتف"],correct:0},
    {q:"في أي سورة يوجد آية (يا أيها الناس اتقوا ربكم)؟",answers:["الحج","البقرة","آل عمران","النساء"],correct:0},
    {q:"كم عدد أيام التشريق؟",answers:["3","4","5","2"],correct:0},
    {q:"ما هو اسم والدة لقمان الحكيم؟",answers:["غير مذكور","سمية","خديجة","مريم"],correct:0},
    {q:"من هو النبي الحاكم بالعدل؟",answers:["سليمان عليه السلام","داود عليه السلام","إبراهيم عليه السلام","محمد ﷺ"],correct:0},
    {q:"كم عدد الركعات في صلاة الاستسقاء؟",answers:["2","4","3","1"],correct:0},
    {q:"ما اسم المسجد الذي بنته أم كلثوم؟",answers:["أم كلثوم","النبي","أحد","قباء"],correct:0},
    {q:"من هو النبي الذي رُفع بجسده؟",answers:["عيسى عليه السلام","محمد ﷺ","موسى عليه السلام","إبراهيم عليه السلام"],correct:0},
    {q:"كم مرة ورد اسم سورة القصص؟",answers:["1","2","3","4"],correct:0},
    {q:"ما اسم أول آية من سورة الكوثر؟",answers:["إنا أعطيناك الكوثر","بسم الله الرحمن الرحيم","إقرأ","الحمد لله"],correct:0},
    {q:"من هي المرأة الوحيدة التي ورد ذكرها بالاسم في القرآن؟",answers:["مريم عليها السلام","آسية","خديجة","حفصة"],correct:0},
    {q:"كم عدد الرقباء في الإسلام؟",answers:["لا تحدد","4","3","2"],correct:0},
    {q:"من هو أول نبي خط بالقلم؟",answers:["إدريس عليه السلام","نوح عليه السلام","إبراهيم عليه السلام","محمد ﷺ"],correct:0},
    {q:"كم مرة ورد اسم الجلالة (الله) في القرآن الكريم؟",answers:["2699","3000","1999","1500"],correct:0},
    {q:"من هو الصحابي الذي كانت الملائكة تسلم عليه؟",answers:["عمران بن حصين","سعد بن معاذ","بلال بن رباح","أبو هريرة"],correct:0},
    {q:"في أي سورة وردت آية الكرسي؟",answers:["البقرة","آل عمران","النساء","المائدة"],correct:0},
    {q:"من هو النبي الذي دعا ربه: (رب لا تذرني فردا وأنت خير الوارثين)؟",answers:["زكريا عليه السلام","إبراهيم عليه السلام","موسى عليه السلام","محمد ﷺ"],correct:0},
    {q:"كم عدد سنين الدعوة السرية للنبي ﷺ؟",answers:["3 سنوات","5 سنوات","7 سنوات","10 سنوات"],correct:0},
    {q:"من هو أول من قاتل بالسيف في سبيل الله؟",answers:["الزبير بن العوام","علي بن أبي طالب","خالد بن الوليد","حمزة بن عبد المطلب"],correct:0},
    {q:"كم عدد السور المكية في القرآن الكريم؟",answers:["86","28","114","30"],correct:0},
    {q:"ما اسم زوجة فرعون التي آمنت بموسى عليه السلام؟",answers:["آسية بنت مزاحم","مريم","خديجة","أم جميل"],correct:0},
    {q:"ما هي السورة التي سميت بقلب القرآن؟",answers:["يس","الفاتحة","الإخلاص","النصر"],correct:0},
    {q:"كم عدد سور جزء عم؟",answers:["37","35","39","40"],correct:0},
    {q:"من هو الصحابي الذي قال عنه النبي ﷺ: (لو كان بعدي نبي لكان هو)؟",answers:["عمر بن الخطاب","أبو بكر الصديق","علي بن أبي طالب","عثمان بن عفان"],correct:0},
    {q:"في أي عام كانت الهجرة النبوية؟",answers:["622م","610م","632م","615م"],correct:0},
    {q:"ما اسم الصحابي الذي نزلت فيه سورة عبس؟",answers:["عبدالله بن أم مكتوم","بلال بن رباح","أبو هريرة","سلمان الفارسي"],correct:0},
    {q:"ما اسم جبل مكة المشرف؟",answers:["جبل النور","جبل أحد","جبل عرفات","جبل الرحمة"],correct:0},
    {q:"كم كان عمر النبي ﷺ عندما توفي؟",answers:["63 سنة","60 سنة","65 سنة","62 سنة"],correct:0},
    {q:"من هو أول من استشهد في الإسلام؟",answers:["سمية بنت خياط","عمار بن ياسر","حمزة بن عبد المطلب","خباب بن الأرت"],correct:0},
    {q:"ما اسم الصحابي الملقب بحبر الأمة؟",answers:["عبدالله بن عباس","عبدالله بن عمر","عبدالله بن مسعود","زيد بن ثابت"],correct:0},
    {q:"من هو النبي الذي أُرسل إلى مدين؟",answers:["شعيب عليه السلام","هود عليه السلام","صالح عليه السلام","يونس عليه السلام"],correct:0},
    {q:"كم عدد ركعات صلاة المغرب؟",answers:["3","2","4","5"],correct:0},
    {q:"من هو الصحابي الذي أشار بحفر الخندق؟",answers:["سلمان الفارسي","أبو عبيدة","بلال بن رباح","زيد بن حارثة"],correct:0},
    {q:"ما اسم السورة التي فيها بسملتين؟",answers:["النمل","الرحمن","الأنفال","التوبة"],correct:0},
    {q:"من هو النبي الذي آمن له جميع قومه؟",answers:["يونس عليه السلام","موسى عليه السلام","محمد ﷺ","نوح عليه السلام"],correct:0},
    {q:"كم عدد السجدات في المصحف الشريف؟",answers:["15","14","16","13"],correct:0},
    {q:"ما اسم الصحابي الذي نام في فراش النبي ﷺ ليلة الهجرة؟",answers:["علي بن أبي طالب","أبو بكر الصديق","عمر بن الخطاب","عثمان بن عفان"],correct:0},
    {q:"ما هي أول صلاة صلاها النبي ﷺ؟",answers:["الظهر","الفجر","العصر","المغرب"],correct:0},
    {q:"من هو النبي الذي أُمر بذبح ابنه؟",answers:["إبراهيم عليه السلام","نوح عليه السلام","يعقوب عليه السلام","يوسف عليه السلام"],correct:0},
    {q:"في أي غزوة استشهد مصعب بن عمير؟",answers:["أحد","بدر","الخندق","تبوك"],correct:0},
    {q:"كم عدد سور القرآن الكريم؟",answers:["114","113","112","115"],correct:0},
    {q:"ما اسم زوجة النبي ﷺ التي لُقبت بأم المؤمنين؟",answers:["خديجة بنت خويلد","عائشة بنت أبي بكر","حفصة بنت عمر","أم سلمة"],correct:0},
    {q:"من هو مؤذن الرسول ﷺ في المدينة؟",answers:["بلال بن رباح","عبدالله بن أم مكتوم","سلمان الفارسي","أبو ذر الغفاري"],correct:0},
    {q:"ما اسم السورة التي نزلت كاملة دفعة واحدة؟",answers:["الأنعام","النصر","الكوثر","الإخلاص"],correct:0},
    {q:"من هو الصحابي الذي نزل فيه قوله تعالى (وما رميت إذ رميت ولكن الله رمى)؟",answers:["محمد ﷺ","علي بن أبي طالب","أبو بكر الصديق","عمر بن الخطاب"],correct:0}
];

// Premium Audio System
function initAudio() {
    try {
        if (!audioContext) {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
        }
    } catch (error) {
        console.log('Audio context not supported');
    }
}

// Premium Sound Effects
function createClickSound() {
    try {
        if (audioContext) {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(1200, audioContext.currentTime + 0.1);
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.1);
        }
    } catch (error) {
        console.log('Sound effect failed');
    }
}

function createCorrectSound() {
    try {
        if (audioContext) {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(523, audioContext.currentTime);
            oscillator.frequency.setValueAtTime(659, audioContext.currentTime + 0.1);
            oscillator.frequency.setValueAtTime(784, audioContext.currentTime + 0.2);
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        }
    } catch (error) {
        console.log('Correct sound failed');
    }
}

function createWrongSound() {
    try {
        if (audioContext) {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(100, audioContext.currentTime + 0.3);
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        }
    } catch (error) {
        console.log('Wrong sound failed');
    }
}

function createWarningSound() {
    try {
        if (audioContext) {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(400, audioContext.currentTime);
            oscillator.frequency.setValueAtTime(300, audioContext.currentTime + 0.1);
            oscillator.frequency.setValueAtTime(400, audioContext.currentTime + 0.2);
            
            gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        }
    } catch (error) {
        console.log('Warning sound failed');
    }
}

function createLoseSound() {
    try {
        if (audioContext) {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(300, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(150, audioContext.currentTime + 0.5);
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
        }
    } catch (error) {
        console.log('Lose sound failed');
    }
}

function createClapSound() {
    try {
        if (audioContext) {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            oscillator.frequency.setValueAtTime(1000, audioContext.currentTime + 0.05);
            oscillator.frequency.setValueAtTime(800, audioContext.currentTime + 0.1);
            oscillator.frequency.setValueAtTime(1000, audioContext.currentTime + 0.15);
            
            gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.2);
        }
    } catch (error) {
        console.log('Clap sound failed');
    }
}

// Premium Popup System
function showPopup(message) {
    try {
        const popup = document.createElement('div');
        popup.className = 'popup';
        popup.innerHTML = `
            <div style="display: flex; align-items: center; gap: 8px;">
                <i class="fas fa-info-circle" style="font-size: 1rem; color: var(--primary-gold);"></i>
                <span>${message}</span>
            </div>
        `;
        
        document.body.appendChild(popup);
        
        setTimeout(() => {
            popup.style.animation = 'notificationSlideUp 0.3s ease-out forwards';
            setTimeout(() => {
                document.body.removeChild(popup);
            }, 300);
        }, 2000);
    } catch (error) {
        console.error('Error showing popup:', error);
    }
}

// Premium Success Animation
function showSuccessAnimation() {
    try {
        const success = document.createElement('div');
        success.className = 'success-animation';
        success.innerHTML = '<i class="fas fa-star"></i>';
        
        document.body.appendChild(success);
        
        setTimeout(() => {
            document.body.removeChild(success);
        }, 1000);
    } catch (error) {
        console.error('Error showing success animation:', error);
    }
}

// Premium Game Functions
function startGame() {
    try {
        initAudio();
        createClickSound();
        
        const nameInput = document.getElementById("player-name");
        if (!nameInput) {
            console.error('Player name input not found');
            return;
        }
        
        playerName = nameInput.value.trim();
        if (!playerName) {
            showPopup("يرجى إدخال اسمك أولاً!");
            return;
        }
        
        if (playerName.length < 2) {
            showPopup("يرجى إدخال اسم صحيح!");
            return;
        }
        
        const startScreen = document.getElementById("start-screen");
        const quizContainer = document.getElementById("quiz-container");
        
        if (startScreen) startScreen.classList.add("hidden");
        if (quizContainer) quizContainer.classList.remove("hidden");
        
        // Reset game state
        score = 0;
        mistakes = 0;
        currentQuestion = 0;
        helperToolsUsed = {
            removeTwo: false,
            hint: false,
            pauseTimer: false
        };
        
        // Shuffle questions for new game
        questions.sort(() => Math.random() - 0.5);
        
        showQuestion();
        
        console.log('Game started successfully for:', playerName);
        
    } catch (error) {
        console.error('Error in startGame:', error);
        showPopup("حدث خطأ في بدء اللعبة. يرجى المحاولة مرة أخرى.");
    }
}

// Premium Remove Two Wrong Answers
function removeTwoWrongAnswers() {
    try {
        console.log('removeTwoWrongAnswers called');
        
        if (helperToolsUsed.removeTwo) {
            console.log('Tool already used');
            return;
        }
        
        const currentQ = questions[currentQuestion];
        if (!currentQ) {
            console.error('Current question not found');
            return;
        }
        
        console.log('Current question:', currentQ);
        console.log('Correct answer index:', currentQ.correct);
        
        const answerButtons = document.querySelectorAll(".answer-btn");
        console.log('Found answer buttons:', answerButtons.length);
        
        if (answerButtons.length === 0) {
            console.error('No answer buttons found');
            return;
        }
        
        const wrongAnswers = [];
        
        // جمع الإجابات الخاطئة
        answerButtons.forEach((btn, index) => {
            console.log(`Button ${index}: ${btn.textContent}, isCorrect: ${index === currentQ.correct}`);
            if (index !== currentQ.correct) {
                wrongAnswers.push({ button: btn, index: index });
            }
        });
        
        console.log('Wrong answers found:', wrongAnswers.length);
        
        if (wrongAnswers.length < 2) {
            console.error('Not enough wrong answers to remove');
            return;
        }
        
        // إزالة خيارين خاطئين عشوائياً
        const shuffled = wrongAnswers.sort(() => 0.5 - Math.random());
        const toRemove = shuffled.slice(0, 2);
        
        console.log('Removing buttons:', toRemove.map(item => item.index));
        
        toRemove.forEach(item => {
            item.button.style.display = 'none';
            item.button.disabled = true;
            console.log(`Hidden button ${item.index}: ${item.button.textContent}`);
        });
        
        helperToolsUsed.removeTwo = true;
        updateHelperButtons();
        createClickSound();
        showPopup("تم إزالة خيارين خاطئين!");
        
        console.log('Remove two wrong answers completed successfully');
        
    } catch (error) {
        console.error('Error in removeTwoWrongAnswers:', error);
        showPopup("حدث خطأ في إزالة الخيارين");
    }
}

// Premium Show Hint
function showHint() {
    try {
        if (helperToolsUsed.hint) return;
        
        const currentQ = questions[currentQuestion];
        const hintDiv = document.getElementById("hint");
        
        if (!currentQ || !hintDiv) {
            console.error('Question or hint div not found');
            return;
        }
        
        // إنشاء تلميحات بناءً على نوع السؤال
        let hintText = "";
        const questionText = currentQ.q.toLowerCase();
        
        if (questionText.includes("كم") || questionText.includes("عدد")) {
            hintText = "💡 تلميح: ركز على الأرقام والأعداد في السؤال";
        } else if (questionText.includes("من") || questionText.includes("أول")) {
            hintText = "💡 تلميح: فكر في الشخصيات التاريخية المهمة";
        } else if (questionText.includes("ما") || questionText.includes("اسم")) {
            hintText = "💡 تلميح: ابحث عن الأسماء والمصطلحات الإسلامية";
        } else if (questionText.includes("في") || questionText.includes("أي")) {
            hintText = "💡 تلميح: فكر في الأماكن والأوقات المهمة";
        } else {
            hintText = "💡 تلميح: اقرأ السؤال بعناية وابحث عن الكلمات المفتاحية";
        }
        
        hintDiv.textContent = hintText;
        hintDiv.style.display = "block";
        
        helperToolsUsed.hint = true;
        updateHelperButtons();
        createClickSound();
        
    } catch (error) {
        console.error('Error in showHint:', error);
    }
}

// Premium Pause Timer
function pauseTimer() {
    try {
        if (helperToolsUsed.pauseTimer) return;
        
        clearInterval(timer);
        const timerDisplay = document.getElementById("timer");
        if (timerDisplay) {
            timerDisplay.style.color = "#ffd700";
            timerDisplay.style.fontWeight = "bold";
        }
        
        setTimeout(() => {
            if (timerDisplay) {
                timerDisplay.style.color = "";
                timerDisplay.style.fontWeight = "";
            }
            resetTimer();
        }, 5000);
        
        helperToolsUsed.pauseTimer = true;
        updateHelperButtons();
        createClickSound();
        showPopup("تم إيقاف المؤقت لمدة 5 ثوانٍ!");
        
    } catch (error) {
        console.error('Error in pauseTimer:', error);
    }
}

// Premium Update Helper Buttons
function updateHelperButtons() {
    try {
        const removeBtn = document.getElementById("remove-two-btn");
        const hintBtn = document.getElementById("hint-btn");
        const pauseBtn = document.getElementById("pause-timer-btn");
        
        console.log('Updating helper buttons...');
        console.log('Helper tools used:', helperToolsUsed);
        
        if (removeBtn) {
            removeBtn.disabled = helperToolsUsed.removeTwo;
            removeBtn.style.opacity = helperToolsUsed.removeTwo ? "0.5" : "1";
            console.log('Remove button updated:', !helperToolsUsed.removeTwo);
        } else {
            console.error('Remove button not found');
        }
        
        if (hintBtn) {
            hintBtn.disabled = helperToolsUsed.hint;
            hintBtn.style.opacity = helperToolsUsed.hint ? "0.5" : "1";
            console.log('Hint button updated:', !helperToolsUsed.hint);
        } else {
            console.error('Hint button not found');
        }
        
        if (pauseBtn) {
            pauseBtn.disabled = helperToolsUsed.pauseTimer;
            pauseBtn.style.opacity = helperToolsUsed.pauseTimer ? "0.5" : "1";
            console.log('Pause button updated:', !helperToolsUsed.pauseTimer);
        } else {
            console.error('Pause button not found');
        }
        
    } catch (error) {
        console.error('Error in updateHelperButtons:', error);
    }
}

// Premium Show Question
function showQuestion() {
    try {
        if (mistakes >= 5) {
            createLoseSound();
            const quizContainer = document.getElementById("quiz-container");
            const endScreen = document.getElementById("end-screen");
            if (quizContainer) quizContainer.classList.add("hidden");
            if (endScreen) {
                endScreen.innerHTML = `
                    <h2><i class="fas fa-sad-tear"></i> لقد خسرت يا ${playerName}!</h2>
                    <p style="margin: 20px 0; font-size: 18px;">لا تستسلم! حاول مرة أخرى</p>
                    <button onclick="restartGame()" class="premium-btn">
                        <i class="fas fa-redo"></i> إعادة اللعب
                    </button>
                `;
                endScreen.classList.remove("hidden");
            }
            return;
        }
        
        if (currentQuestion >= questions.length) {
            const quizContainer = document.getElementById("quiz-container");
            const endScreen = document.getElementById("end-screen");
            if (quizContainer) quizContainer.classList.add("hidden");
            if (endScreen) {
                endScreen.innerHTML = `
                    <h2><i class="fas fa-star"></i> مبروك يا ${playerName}! لقد أكملت جميع الأسئلة!</h2>
                    <p style="margin: 20px 0; font-size: 18px;">النقاط النهائية: ${score}</p>
                    <button onclick="restartGame()" class="premium-btn">
                        <i class="fas fa-redo"></i> إعادة اللعب
                    </button>
                `;
                endScreen.classList.remove("hidden");
            }
            return;
        }
        
        let q = questions[currentQuestion];
        if (!q) {
            console.error('Question not found at index:', currentQuestion);
            return;
        }
        
        // Shuffle answers and update correct index
        let answerObjs = q.answers.map((a, idx) => ({text: a, isCorrect: idx === q.correct}));
        for (let i = answerObjs.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [answerObjs[i], answerObjs[j]] = [answerObjs[j], answerObjs[i]];
        }
        let newCorrectIdx = answerObjs.findIndex(a => a.isCorrect);
        q.answers = answerObjs.map(a => a.text);
        q.correct = newCorrectIdx;
        
        const questionElement = document.getElementById("question");
        if (questionElement) questionElement.textContent = q.q;
        
        // إخفاء التلميح السابق
        const hintDiv = document.getElementById("hint");
        if (hintDiv) {
            hintDiv.style.display = "none";
        }
        
        let aDiv = document.getElementById("answers");
        if (!aDiv) {
            console.error('Answers container not found');
            return;
        }
        
        aDiv.innerHTML = "";
        q.answers.forEach((ans, i) => {
            const btn = document.createElement("button");
            btn.textContent = ans;
            btn.className = "answer-btn";
            btn.style.animationDelay = (i * 0.1) + "s";
            btn.disabled = false;
            btn.style.pointerEvents = 'auto';
            btn.style.cursor = 'pointer';
            btn.style.opacity = '1';
            btn.style.display = 'block';
            btn.onclick = () => {
                initAudio();
                createClickSound();
                checkAnswer(i);
            };
            aDiv.appendChild(btn);
        });
        
        // تحديث أزرار المساعدة
        updateHelperButtons();
        
        resetTimer();
        
    } catch (error) {
        console.error('Error in showQuestion:', error);
        showPopup('حدث خطأ في عرض السؤال. يرجى تحديث الصفحة والمحاولة مرة أخرى.');
    }
}

// Premium Reset Timer
function resetTimer() {
    try {
        clearInterval(timer);
        timeLeft = 30;
        const timerElement = document.getElementById("timer");
        if (timerElement) timerElement.textContent = timeLeft;
        
        timer = setInterval(() => {
            timeLeft--;
            if (timerElement) timerElement.textContent = timeLeft;
            if (timeLeft == 5) {
                createWarningSound();
            }
            if (timeLeft <= 0) {
                clearInterval(timer);
                autoWrong();
            }
        }, 1000);
    } catch (error) {
        console.error('Error in resetTimer:', error);
    }
}

// Premium Auto Wrong
function autoWrong() {
    try {
        const correct = questions[currentQuestion].correct;
        const allButtons = document.querySelectorAll(".answer-btn");
        
        // Disable all buttons
        allButtons.forEach(btn => {
            btn.disabled = true;
            btn.style.pointerEvents = 'none';
            btn.style.cursor = 'default';
        });
        
        // Show correct answer in green
        if (allButtons[correct]) {
            allButtons[correct].classList.add("correct");
        }
        
        createWrongSound();
        mistakes++;
        
        const scoreElement = document.getElementById("score");
        if (scoreElement) scoreElement.textContent = `النقاط: ${score} | الأخطاء: ${mistakes}`;
        
        setTimeout(() => {
            currentQuestion++;
            showQuestion();
        }, 2000);
        
    } catch (error) {
        console.error('Error in autoWrong:', error);
    }
}

// Premium Check Answer
function checkAnswer(selected) {
    try {
        clearInterval(timer);
        const correct = questions[currentQuestion].correct;
        const allButtons = document.querySelectorAll(".answer-btn");
        
        // Disable all buttons to prevent multiple clicks
        allButtons.forEach(btn => {
            btn.disabled = true;
            btn.style.pointerEvents = 'none';
            btn.style.cursor = 'default';
        });
        
        if (selected === correct) {
            allButtons[selected].classList.add("correct");
            createCorrectSound();
            score++;
            showSuccessAnimation();
            
            // رسائل تشجيعية صوتية
            if (score == 5) {
                showPopup("كفو يا " + playerName + "!");
                createClapSound();
            }
            if (score == 10) {
                showPopup("أنت بطل يا " + playerName + "!");
                createClapSound();
            }
            if (score == 15) {
                const quizContainer = document.getElementById("quiz-container");
                const endScreen = document.getElementById("end-screen");
                if (quizContainer) quizContainer.classList.add("hidden");
                if (endScreen) {
                    endScreen.innerHTML = `
                        <h2><i class="fas fa-trophy"></i> مبروك يا ${playerName}! لقد ربحت!</h2>
                        <p style="margin: 20px 0; font-size: 18px;">النقاط النهائية: ${score}</p>
                        <button onclick="restartGame()" class="premium-btn">
                            <i class="fas fa-redo"></i> إعادة اللعب
                        </button>
                    `;
                    endScreen.classList.remove("hidden");
                }
                return;
            }
        } else {
            // Show wrong answer in red
            allButtons[selected].classList.add("wrong");
            // Show correct answer in green
            allButtons[correct].classList.add("correct");
            createWrongSound();
            mistakes++;
        }
        
        const scoreElement = document.getElementById("score");
        if (scoreElement) scoreElement.textContent = `النقاط: ${score} | الأخطاء: ${mistakes}`;
        
        setTimeout(() => {
            currentQuestion++;
            showQuestion();
        }, 2000);
        
    } catch (error) {
        console.error('Error in checkAnswer:', error);
    }
}

// Premium Restart Game
function restartGame() {
    try {
        initAudio();
        createClickSound();
        score = 0;
        mistakes = 0;
        currentQuestion = 0;
        
        // إعادة تعيين الأدوات المساعدة
        helperToolsUsed = {
            removeTwo: false,
            hint: false,
            pauseTimer: false
        };
        
        // Shuffle questions for new game
        questions.sort(() => Math.random() - 0.5);
        
        const quizContainer = document.getElementById("quiz-container");
        const endScreen = document.getElementById("end-screen");
        const startScreen = document.getElementById("start-screen");
        
        if (quizContainer) quizContainer.classList.add("hidden");
        if (endScreen) endScreen.classList.add("hidden");
        if (startScreen) startScreen.classList.remove("hidden");
        
        // Reset player name input
        const nameInput = document.getElementById("player-name");
        if (nameInput) nameInput.value = "";
        
    } catch (error) {
        console.error('Error in restartGame:', error);
    }
}

// Premium Go to Homepage
function goToHomepage() {
    try {
        initAudio();
        createClickSound();
        location.reload();
    } catch (error) {
        console.error('Error in goToHomepage:', error);
    }
}

// Initialize game when page loads
document.addEventListener('DOMContentLoaded', function() {
    try {
        console.log('Game initialized successfully');
        
        // Add enter key support for player name input
        const nameInput = document.getElementById("player-name");
        if (nameInput) {
            nameInput.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    startGame();
                }
            });
        }
        
        // Initialize audio context on first user interaction
        document.addEventListener('click', function() {
            initAudio();
        }, { once: true });
        
    } catch (error) {
        console.error('Error initializing game:', error);
    }
});
</script>
</body>
</html>

